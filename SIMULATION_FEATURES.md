# 网络仿真功能说明

## 🔬 新增功能概览

本次更新为校园网络算法可视化平台添加了完整的网络仿真实验室，包含以下核心功能：

### 1. 🛡️ 网络鲁棒性分析

#### 功能描述
- **关键边（桥）识别**：自动识别删除后会导致网络断开的边
- **关键节点（割点）识别**：自动识别删除后会导致网络断开的节点
- **鲁棒性指标评估**：
  - 鲁棒性得分（0-100%）
  - 平均度数
  - 网络密度
  - 聚类系数
  - 连通性分析

#### 使用方法
1. 在"网络配置"页面生成并应用网络拓扑
2. 切换到"网络仿真"标签页
3. 选择"鲁棒性分析"功能
4. 点击"分析网络鲁棒性"按钮
5. 查看分析结果和可视化图表

#### 技术实现
- 使用NetworkX的桥检测和割点检测算法
- 基于图论的连通性评估
- 综合多个指标计算鲁棒性得分

### 2. ⚖️ 多路径负载均衡

#### 功能描述
- **单路径传输**：使用最短路径传输所有流量（基准模式）
- **加权负载均衡**：根据路径容量按比例分配流量
- **拥塞避免负载均衡**：考虑当前流量状态，智能分配到可用容量最大的路径

#### 配置参数
- **源节点**：流量起始点
- **目标节点**：流量目的地
- **总流量**：需要传输的总流量大小
- **路径数量**：使用的并行路径数（1-5条）
- **启用负载均衡**：是否使用多路径传输
- **启用拥塞避免**：是否考虑拥塞情况优化分配

#### 实时监控指标
- 使用路径数
- 平均利用率
- 最大利用率
- 拥塞链路数
- 每条路径的流量分配

#### 使用方法
1. 配置源节点和目标节点
2. 设置总流量和路径数量
3. 选择是否启用负载均衡和拥塞避免
4. 点击"开始仿真"查看结果
5. 对比不同策略的效果

### 3. 💧 增强的最大流计算

在网络仿真模块中集成了快速的最大流计算功能，支持：
- 选择源节点和汇节点
- 使用Dinic算法高效计算
- 可视化流量分配结果

## 📊 可视化增强

### 鲁棒性分析可视化
- 普通边：灰色显示
- **关键边（桥）**：红色加粗显示
- 普通节点：浅蓝色显示
- **关键节点（割点）**：橙色加大显示

### 负载均衡可视化
- 不同路径使用不同颜色标识
- 边标签显示流量和利用率百分比
- 源节点：绿色
- 目标节点：红色
- 中间节点：蓝色

## 🔧 技术架构

### 后端模块

#### `backend/algorithms/robustness.py`
- `RobustnessAnalyzer` 类：鲁棒性分析器
- `find_bridges()`: 寻找所有桥
- `find_articulation_points()`: 寻找所有割点
- `compute_robustness_metrics()`: 计算鲁棒性指标
- `simulate_edge_removal()`: 模拟边移除
- `simulate_node_removal()`: 模拟节点移除

#### `backend/algorithms/traffic.py`
- `TrafficMonitor` 类：流量监控器
- `LoadBalancer` 类：负载均衡器
- `CongestionController` 类：拥塞控制器
- `simulate_traffic_load_balancing()`: 流量负载均衡仿真

#### `backend/algorithms/utils.py`
- `draw_robustness_result()`: 绘制鲁棒性分析结果
- `draw_traffic_load_balancing()`: 绘制负载均衡结果

### API 接口

#### 鲁棒性分析
- `POST /api/robustness/analyze` - 分析网络鲁棒性
- `POST /api/robustness/simulate-edge-removal` - 模拟边移除
- `POST /api/robustness/simulate-node-removal` - 模拟节点移除
- `POST /api/robustness/redundant-paths` - 获取冗余路径

#### 流量监控与负载均衡
- `POST /api/traffic/simulate-load-balancing` - 模拟流量负载均衡

### 前端组件

#### `NetworkSimulationPanel.vue`
完整的网络仿真面板，包含：
- 功能选择界面
- 参数配置表单
- 结果展示和可视化
- 实时指标监控

## 🎯 应用场景

### 教学演示
- 展示网络鲁棒性的概念
- 对比不同负载均衡策略的效果
- 理解关键节点和边的重要性

### 网络设计
- 识别网络中的单点故障
- 评估网络冗余度
- 优化流量分配策略

### 性能分析
- 测试不同配置下的网络性能
- 比较启用/禁用负载均衡的差异
- 分析拥塞避免的效果

## 📈 性能特点

- **高效算法**：使用NetworkX优化的图算法
- **可视化优化**：图片以base64编码传输，无需额外文件
- **参数可调**：支持自定义各类参数
- **开关对比**：可以通过开关直观比对不同策略效果

## 🔄 与现有功能集成

新的仿真功能完全兼容现有的网络配置系统：
1. 在"网络配置"生成拓扑
2. 点击"应用到算法"保存配置
3. 在"网络仿真"使用保存的网络进行各种分析

## 🚀 快速开始

```bash
# 启动后端
cd backend
python app.py

# 启动前端
cd frontend
npm run dev
```

访问 http://localhost:3000，选择"网络仿真"标签即可使用新功能。

## 📝 注意事项

1. **网络配置**：使用仿真功能前必须先在"网络配置"页面生成并应用网络
2. **节点编号**：确保源节点和目标节点在网络拓扑中存在
3. **流量设置**：总流量应小于等于网络的最大流容量
4. **路径数量**：建议设置2-3条路径以获得最佳负载均衡效果

## 🎓 算法说明

### 关键边（桥）检测
使用Tarjan算法，时间复杂度 O(V + E)

### 关键节点（割点）检测
使用DFS深度优先搜索，时间复杂度 O(V + E)

### 负载均衡策略
- **等分策略**：流量平均分配到所有路径
- **加权策略**：根据路径瓶颈容量按比例分配
- **拥塞避免**：考虑当前流量状态，优先使用空闲链路

## 🔮 未来扩展

- [ ] 动态流量模拟（时间序列）
- [ ] 故障恢复策略
- [ ] 更多鲁棒性指标
- [ ] 网络攻击模拟
- [ ] QoS（服务质量）保证

## 📄 许可

本项目为教学和研究目的开发，遵循原项目许可协议。
